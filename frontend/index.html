<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>kaczmarek.ai-dev Dashboard</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1>kaczmarek.ai-dev</h1>
      <nav class="nav">
        <button class="nav-btn active" data-view="dashboard">Dashboard</button>
        <button class="nav-btn" data-view="workflows">Workflows</button>
        <button class="nav-btn" data-view="agents">Agents</button>
        <button class="nav-btn" data-view="executions">Executions</button>
        <button class="nav-btn" data-view="versions">Versions</button>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Dashboard View -->
      <div id="dashboard-view" class="view active">
        <h2>Dashboard</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <h3>Workflows</h3>
            <p class="stat-value" id="workflow-count">-</p>
          </div>
          <div class="stat-card">
            <h3>Active Agents</h3>
            <p class="stat-value" id="agent-count">-</p>
          </div>
          <div class="stat-card">
            <h3>Executions</h3>
            <p class="stat-value" id="execution-count">-</p>
          </div>
          <div class="stat-card">
            <h3>Versions</h3>
            <p class="stat-value" id="version-count">-</p>
          </div>
        </div>

        <div class="section">
          <div class="section-header">
            <h3>Quick Actions</h3>
          </div>
          <div class="actions-grid">
            <button class="action-btn" onclick="switchView('workflows')">
              <span class="action-icon">ðŸ“‹</span>
              <span class="action-label">View Workflows</span>
            </button>
            <button class="action-btn" onclick="switchView('agents')">
              <span class="action-icon">ðŸ¤–</span>
              <span class="action-label">Monitor Agents</span>
            </button>
            <button class="action-btn" onclick="switchView('executions')">
              <span class="action-icon">âš¡</span>
              <span class="action-label">Execution History</span>
            </button>
            <button class="action-btn" onclick="switchView('versions')">
              <span class="action-icon">ðŸ“š</span>
              <span class="action-label">View Versions</span>
            </button>
          </div>
        </div>

        <div class="section">
          <h3>Recent Executions</h3>
          <div id="recent-executions" class="list"></div>
        </div>

        <div class="section">
          <h3>Active Agent Tasks</h3>
          <div id="active-agents" class="list"></div>
        </div>

        <div class="section">
          <h3>Latest Version Summary</h3>
          <div id="latest-version" class="version-summary"></div>
        </div>
      </div>

      <!-- Workflows View -->
      <div id="workflows-view" class="view">
        <div class="view-header">
          <h2>Workflows</h2>
          <button class="btn btn-primary" onclick="loadWorkflows()">Refresh</button>
        </div>
        <div id="workflows-list" class="list"></div>
      </div>

      <!-- Agents View -->
      <div id="agents-view" class="view">
        <div class="view-header">
          <h2>Agent Tasks</h2>
          <button class="btn btn-primary" onclick="loadAgents()">Refresh</button>
        </div>
        
        <!-- Status Definitions -->
        <div class="section" style="margin-bottom: 2rem;">
          <h3>Agent Task Status Definitions</h3>
          <div class="status-definitions">
            <div class="status-definition">
              <span class="status-badge queued">queued</span>
              <div class="status-definition-content">
                <strong>Queued</strong>
                <p>Task has been created and is waiting to be processed by the agent processor. The processor automatically picks up queued tasks and attempts to execute them.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge processing">processing</span>
              <div class="status-definition-content">
                <strong>Processing</strong>
                <p>Task is currently being processed by the agent executor. Simple tasks (file creation, test running) are executed automatically. Complex tasks require manual intervention.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge ready">ready</span>
              <div class="status-definition-content">
                <strong>Ready</strong>
                <p><strong>Why "ready" instead of "completed"?</strong> The agent processor has attempted automatic execution. Simple tasks may have been executed, but complex implementation tasks require Cursor Chat for completion. "Ready" means the task is ready for you to complete the remaining work manually, then mark it as completed.</p>
                <p style="margin-top: 0.5rem;">Use Cursor Chat with the context file (`.cursor/agent-processing.json`) to complete remaining tasks, then mark as complete with the "âœ“ Complete" button or <code>kad agent complete &lt;task-id&gt;</code>.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge queued">queued</span>
              <div class="status-definition-content">
                <strong>Queued</strong>
                <p>Task has been created and is waiting to be processed by the agent processor.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge processing">processing</span>
              <div class="status-definition-content">
                <strong>Processing</strong>
                <p>Task is currently being processed by the agent executor. Automatic tasks may be executed.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge ready">ready</span>
              <div class="status-definition-content">
                <strong>Ready</strong>
                <p>Task has been processed and is ready for manual completion via Cursor Chat. Some tasks may have been executed automatically, but complex tasks require human intervention. Use Cursor Chat with the context file to complete remaining tasks, then mark as complete with <code>kad agent complete &lt;task-id&gt;</code>.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge completed">completed</span>
              <div class="status-definition-content">
                <strong>Completed</strong>
                <p>Task has been fully completed. All implementation tasks are done, progress and review files have been updated, and the task is marked as complete in the review document.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge failed">failed</span>
              <div class="status-definition-content">
                <strong>Failed</strong>
                <p>Task encountered an error during processing. Check the task details for error information.</p>
              </div>
            </div>
            <div class="status-definition">
              <span class="status-badge partial">partial</span>
              <div class="status-definition-content">
                <strong>Partial</strong>
                <p>Some tasks were executed successfully, but some failed. Review the execution results and complete remaining tasks manually.</p>
              </div>
            </div>
          </div>
        </div>
        
        <div id="agents-list" class="list"></div>
      </div>

      <!-- Executions View -->
      <div id="executions-view" class="view">
        <div class="view-header">
          <h2>Execution History</h2>
          <button class="btn btn-primary" onclick="loadExecutions()">Refresh</button>
        </div>
        <div id="executions-list" class="list"></div>
      </div>

      <!-- Versions View -->
      <div id="versions-view" class="view">
        <div class="view-header">
          <h2>Versions</h2>
          <button class="btn btn-primary" onclick="loadVersions()">Refresh</button>
        </div>
        <div id="versions-list" class="list"></div>
      </div>
    </main>
  </div>

  <!-- Modal for details -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>

